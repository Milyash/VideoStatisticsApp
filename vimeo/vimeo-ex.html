<!DOCTYPE html>
<html>
	<head>
		<title>Vimeo test</title>
		<meta charset="UTF-8">
		<link href="../style_player.css" rel="stylesheet">

		<script src="../Libraries/jquery-1.11.0.min.js"></script>
		<script src="http://a.vimeocdn.com/js/froogaloop2.min.js?97273-1352487961"></script>

		<script type="text/javascript">
			//<![CDATA[
			var gs_d=new Date,DoW=gs_d.getDay();gs_d.setDate(gs_d.getDate()-(DoW+6)%7+3);
			var ms=gs_d.valueOf();gs_d.setMonth(0);gs_d.setDate(4);
			var gs_r=(Math.round((ms-gs_d.valueOf())/6048E5)+1)*gs_d.getFullYear();
			var gs_p = (("https:" == document.location.protocol) ? "https://" : "http://");
			document.write(unescape("%3Cscript src='" + gs_p + "s.gstat.orange.fr/lib/gs.js?"+gs_r+"' type='text/javascript'%3E%3C/script%3E"));
			//]]>
		</script>

	</head>

	<body style="background-color: #46428A">

		<div style="margin: 50px auto; width:640px">
			<iframe id="player" src="http://player.vimeo.com/video/24285155?api=1&player_id=player&byline=0&portrait=0&color=d4400e" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
		</div>

		<div id="result_container">Result:
			<button id="clear"> Clear! </button>
			<ul id="result">
			</ul>
		</div>

		<script type="text/javascript">
			//<![CDATA[
			if (typeof _gstat != "undefined") _gstat.audience('','confirme-voila.net');
			//]]>

			$("#clear").click(function(){
				$("#result").empty();
			});

			var iframe = $('#player')[0];
 			var player = $f(iframe);

 			player.addEvent('ready', function() {

			  	var result = $("#result");

			  	var current_volume;

			  	player.api("getVolume", function(volume) {

			  		current_volume = volume;
			  	});

 				player.addEvent('play', onPlay);
 				player.addEvent('pause', onPause);
 				player.addEvent('seek', onSeek);
 				player.addEvent('playProgress', onPlayProgress);

 				function onPlayProgress() {

 					var new_volume;
 					player.api("getVolume", function(volume) {

			  		new_volume = volume;
			  		if (current_volume != new_volume) {

 						result.append("<li>" +  "muted! from " + current_volume + "to " + new_volume + "</li>");
 						current_volume = new_volume;
 					}
			  	});
 				}

 				function onPlay(id) {
				
					add_to_results("play!" );
				};

				function onPause(id) {

					add_to_results("pause!" );
				};

				function onSeek(data) {

					add_to_results("seeking! to ");
				};

				function add_to_results(new_line) {

					player.api("getCurrentTime", function(value, player_id) {

						result.append("<li>" + new_line + ", time = " + value.toFixed(2) + "sec </li>");
					});
				  }
			});

			
		</script>
	</body>
</html>